{"options":[{"enabled":false,"definition":{"id":"5d58cc01-7c75-450c-be18-a388ddb129ec"},"inputs":{"branchFilters":"[\"+refs/heads/*\"]","additionalFields":"{}"}},{"enabled":false,"definition":{"id":"a9db38f9-9fdc-478c-b0f9-464221e58316"},"inputs":{"workItemType":"Issue","assignToRequestor":"true","additionalFields":"{}"}}],"triggers":[{"schedules":[{"branchFilters":["+refs/heads/main"],"timeZoneId":"W. Europe Standard Time","startHours":18,"startMinutes":10,"daysToBuild":17,"scheduleJobId":"8cf3c96b-78e9-4f6f-90c3-065163fd8772","scheduleOnlyWithChanges":false}],"triggerType":8}],"variables":{"githubdisplayname":{"value":"Thomas ZÃ¼hlke"},"githubmail":{"value":"thomas.zuehlke@gmail.com"},"githubname":{"value":"tzuehlke"},"githubtoken":{"value":null,"isSecret":true},"system.debug":{"value":"false","allowOverride":true}},"properties":{},"tags":[],"_links":{"self":{"href":"https://dev.azure.com/tzuehlke/be215af2-53ed-4849-9751-310149faae6f/_apis/build/Definitions/1?revision=68"},"web":{"href":"https://dev.azure.com/tzuehlke/be215af2-53ed-4849-9751-310149faae6f/_build/definition?definitionId=1"},"editor":{"href":"https://dev.azure.com/tzuehlke/be215af2-53ed-4849-9751-310149faae6f/_build/designer?id=1&_a=edit-build-definition"},"badge":{"href":"https://dev.azure.com/tzuehlke/be215af2-53ed-4849-9751-310149faae6f/_apis/build/status/1"}},"buildNumberFormat":"$(Date:yyyyMMdd)$(Rev:.r)","jobAuthorizationScope":2,"jobTimeoutInMinutes":10,"jobCancelTimeoutInMinutes":5,"process":{"phases":[{"steps":[{"environment":{"DOCKER_BUILDKIT":"1"},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"build image and push to docker hub","timeoutInMinutes":0,"retryCountOnTaskFailure":0,"condition":"succeeded()","task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"2.*","definitionType":"task"},"inputs":{"containerRegistry":"29e9a8c1-fb1e-43a1-9502-a98b476741b5","repository":"tzuehlke/snowflake","command":"buildAndPush","Dockerfile":"**/Dockerfile","buildContext":"**","tags":"latest\n$(Build.BuildNumber)","arguments":"","addPipelineData":"true","addBaseImageData":"true","container":""}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Delete CI","timeoutInMinutes":0,"retryCountOnTaskFailure":0,"condition":"succeeded()","task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"2.*","definitionType":"task"},"inputs":{"connectedServiceNameARM":"9358d465-747c-4fca-a0f3-618315cfa7dc","scriptType":"pscore","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"az container delete --name \"snowflake-proxy\" --resource-group \"rg-snowflake\" --yes","scriptArguments":"","powerShellErrorActionPreference":"silentlyContinue","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false","powerShellIgnoreLASTEXITCODE":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Create CI from docker hub","timeoutInMinutes":0,"retryCountOnTaskFailure":0,"condition":"succeeded()","task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"2.*","definitionType":"task"},"inputs":{"connectedServiceNameARM":"9358d465-747c-4fca-a0f3-618315cfa7dc","scriptType":"pscore","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"az container create -g \"rg-snowflake\" --name \"snowflake-proxy\" --image tzuehlke/snowflake:latest","scriptArguments":"","powerShellErrorActionPreference":"silentlyContinue","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false","powerShellIgnoreLASTEXITCODE":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"PS Copy and Push Code ","timeoutInMinutes":0,"retryCountOnTaskFailure":0,"condition":"succeeded()","task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"},"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"cd $(Agent.BuildDirectory)\nrm -rf snowflake/\n#ls -la\ngit config --global user.name $(githubdisplayname)\ngit config --global user.email $(githubmail) \ngit clone https://$(githubname):$(githubtoken)@github.com/tzuehlke/snowflake.git\n#ls -la\ncd snowflake\n#ls -la\ncd ..\ncd s\nren README.md README_snowflake.md\n#ls -la\ncopy * $(Agent.BuildDirectory)/snowflake/\ncd ../snowflake\nls -la\ngit add -A\ngit commit --allow-empty -m \"update $(Build.BuildNumber)\"\ngit push --force","errorActionPreference":"silentlyContinue","warningPreference":"default","informationPreference":"default","verbosePreference":"default","debugPreference":"default","progressPreference":"silentlyContinue","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"}}],"name":"Agent job 1","refName":"Job_1","condition":"succeeded()","target":{"queue":{"_links":{"self":{"href":"https://dev.azure.com/tzuehlke/_apis/build/Queues/9"}},"id":9,"url":"https://dev.azure.com/tzuehlke/_apis/build/Queues/9","pool":null},"agentSpecification":{"identifier":"ubuntu-latest"},"executionOptions":{"type":0},"allowScriptsAuthAccessOption":false,"type":1},"jobAuthorizationScope":2}],"target":{"agentSpecification":{"identifier":"ubuntu-latest"}},"type":1},"repository":{"properties":{"fullName":"repository","cloneUrl":"https://gitlab.torproject.org/tpo/anti-censorship/docker-snowflake-proxy.git","isPrivate":"False","checkoutNestedSubmodules":"false","cleanOptions":"0","fetchDepth":"0","gitLfsSupport":"false","reportBuildStatus":"true","connectedServiceId":"4d879ea3-8a1f-4ed7-bdac-a83e38db8da0","skipSyncSource":"false","fetchTags":"false","labelSourcesFormat":"$(build.buildNumber)","labelSources":"0"},"id":"https://gitlab.torproject.org/tpo/anti-censorship/docker-snowflake-proxy.git","type":"Git","name":"snowflake gitlab public","url":"https://gitlab.torproject.org/tpo/anti-censorship/docker-snowflake-proxy.git","defaultBranch":"refs/heads/main","clean":"true","checkoutSubmodules":false},"processParameters":{},"quality":1,"authoredBy":{"displayName":"thom as","url":"https://spsprodweu5.vssps.visualstudio.com/A76db2079-2654-4ecd-a2b2-80cc30d12ecf/_apis/Identities/846f3140-4a86-450d-b769-822f30e7b935","_links":{"avatar":{"href":"https://dev.azure.com/tzuehlke/_apis/GraphProfile/MemberAvatars/msa.ZWM5NTk0N2MtZmU4OC03MGE5LTg3MzUtMTBiN2JhZGFhNGQz"}},"id":"846f3140-4a86-450d-b769-822f30e7b935","uniqueName":"thomas.zuehlke@googlemail.com","imageUrl":"https://dev.azure.com/tzuehlke/_apis/GraphProfile/MemberAvatars/msa.ZWM5NTk0N2MtZmU4OC03MGE5LTg3MzUtMTBiN2JhZGFhNGQz","descriptor":"msa.ZWM5NTk0N2MtZmU4OC03MGE5LTg3MzUtMTBiN2JhZGFhNGQz"},"drafts":[],"queue":{"_links":{"self":{"href":"https://dev.azure.com/tzuehlke/_apis/build/Queues/9"}},"id":9,"name":"Azure Pipelines","url":"https://dev.azure.com/tzuehlke/_apis/build/Queues/9","pool":{"id":9,"name":"Azure Pipelines","isHosted":true}},"id":1,"name":"snowflake-proxy build, publish, create instance","url":"https://dev.azure.com/tzuehlke/be215af2-53ed-4849-9751-310149faae6f/_apis/build/Definitions/1?revision=68","uri":"vstfs:///Build/Definition/1","path":"\\","type":2,"queueStatus":0,"revision":68,"createdDate":"2023-04-23T12:40:07.843Z","project":{"id":"be215af2-53ed-4849-9751-310149faae6f","name":"snowflake-pipeline","url":"https://dev.azure.com/tzuehlke/_apis/projects/be215af2-53ed-4849-9751-310149faae6f","state":1,"revision":12,"visibility":0,"lastUpdateTime":"2023-04-11T21:55:43.037Z"}}